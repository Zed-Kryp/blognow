{% extends "base.html" %}

{% block title %}BlogNow - Home{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
{% endblock %}

{% block content %}
<div class="blog-feed">
    {% for blog in blogs %}
    <article class="blog-card">
        <div class="blog-header">
            <h2 class="blog-title">
                <a href="{{ url_for('blog_detail', blog_id=blog.id) }}">{{ blog.title }}</a>
            </h2>
            <div class="blog-meta">
                <span class="author">
                    <a href="{{ url_for('profile', user_id=blog.author.id) }}">{{ blog.author.username }}</a>
                    <span class="role-badge {{ blog.author.role }}">{{ blog.author.role }}</span>
                </span>
                <span class="date">{{ blog.created_at.strftime('%B %d, %Y') }}</span>
            </div>
        </div>
        
        <div class="blog-excerpt">
            {{ blog.content[:200] }}...
        </div>
        
        <div class="blog-footer">
            <div class="blog-tags">
                {% for tag in blog.tags.split(',') %}
                <span class="tag">{{ tag.strip() }}</span>
                {% endfor %}
            </div>
            
            <div class="blog-stats">
                <span class="likes">
                    <i class="like-icon">‚ù§</i>
                    {{ blog.likes|length }}
                </span>
                <span class="comments">
                    <i class="comment-icon">üí¨</i>
                    {{ blog.comments|length }}
                </span>
                <button class="share-btn" onclick="shareBlog({{ blog.id }})">
                    <i class="share-icon">üì§</i>
                </button>
            </div>
        </div>
    </article>
    {% else %}
    <div class="no-blogs">
        <p>No blogs published yet. Be the first to write one!</p>
        {% if current_user.role in ['author', 'moderator', 'admin'] %}
        <a href="{{ url_for('new_blog') }}" class="btn btn-primary">Write Your First Blog</a>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/home.js') }}"></script>
{% endblock %} 